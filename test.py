"""Test module for hyper parameters and other things"""
from PIL import Image
from image_processing import ccv, ccv_distance, get_image_from_url
from loop_sorting import loop_sort, resort_loop

def make_mosaic(images: list[tuple[str, str]]) -> Image:
    """Makes a mosaic from a loop"""
    # Use PIL
    final = Image.new("RGB", (len(images) * 64, 64))
    for i in enumerate(images):
        image = get_image_from_url(images[i][0], 64, blur=0, quantized_level=0)
        final.paste(image, (i * 64, 0))
    return final

if __name__ == '__main__':
    urls = ['https://i.scdn.co/image/ab67616d00004851d65c698f7b03031930a2a570', 
            'https://i.scdn.co/image/ab67616d00004851d65c698f7b03031930a2a570', 
            'https://i.scdn.co/image/ab67616d00004851d65c698f7b03031930a2a570', 
            'https://i.scdn.co/image/ab67616d0000485114d93f9588f6c4ae041bf564', 
            'https://i.scdn.co/image/ab67616d00004851e6dfaed2104e0512b7f22256', 
            'https://i.scdn.co/image/ab67616d00004851e6dfaed2104e0512b7f22256', 
            'https://i.scdn.co/image/ab67616d00004851e6dfaed2104e0512b7f22256', 
            'https://i.scdn.co/image/ab67616d00004851e6dfaed2104e0512b7f22256', 
            'https://i.scdn.co/image/ab67616d00004851f7378d916e5fc5c64c59551d', 
            'https://i.scdn.co/image/ab67616d00004851270ee6bff127a5204a9fdbde', 
            'https://i.scdn.co/image/ab67616d00004851ce297d227df16302c8160899', 
            'https://i.scdn.co/image/ab67616d00004851c9f00262963ee3898d25c0f5', 
            'https://i.scdn.co/image/ab67616d00004851ba7facf74347cbd447cd804a', 
            'https://i.scdn.co/image/ab67616d00004851472fbc1d5743c7d3c75b9ec0', 
            'https://i.scdn.co/image/ab67616d00004851cdb0878d613ba38f449442a5', 
            'https://i.scdn.co/image/ab67616d00004851cdb0878d613ba38f449442a5', 
            'https://i.scdn.co/image/ab67616d00004851356c394ed66aa49f46ba12f6', 
            'https://i.scdn.co/image/ab67616d00004851548910835dbfaf3f79a1dc46', 
            'https://i.scdn.co/image/ab67616d000048519bdf7ddd51003bc6b491ce73', 
            'https://i.scdn.co/image/ab67616d000048519bdf7ddd51003bc6b491ce73', 
            'https://i.scdn.co/image/ab67616d000048519bdf7ddd51003bc6b491ce73', 
            'https://i.scdn.co/image/ab67616d000048519bdf7ddd51003bc6b491ce73', 
            'https://i.scdn.co/image/ab67616d00004851d85110a9ebf998f8bb9417ac', 
            'https://i.scdn.co/image/ab67616d00004851d85110a9ebf998f8bb9417ac', 
            'https://i.scdn.co/image/ab67616d000048513592050efaa372b303597f4a', 
            'https://i.scdn.co/image/ab67616d00004851baf2b3c3a37bc9d39ebe3b36', 
            'https://i.scdn.co/image/ab67616d00004851104dd939c10a2ef4fde1f1df', 
            'https://i.scdn.co/image/ab67616d00004851d776202daa1fb9b2a217777a', 
            'https://i.scdn.co/image/ab67616d0000485135018788537f9ea1eb8785dc', 
            'https://i.scdn.co/image/ab67616d0000485135018788537f9ea1eb8785dc', 
            'https://i.scdn.co/image/ab67616d0000485135018788537f9ea1eb8785dc', 
            'https://i.scdn.co/image/ab67616d0000485135018788537f9ea1eb8785dc', 
            'https://i.scdn.co/image/ab67616d0000485133c6b920eabcf4c00d7a1093', 
            'https://i.scdn.co/image/ab67616d000048515a91c98a794e3992f38d24ba', 
            'https://i.scdn.co/image/ab67616d00004851b2cb94f2febe2df19963b6e4', 
            'https://i.scdn.co/image/ab67616d00004851b2cb94f2febe2df19963b6e4', 
            'https://i.scdn.co/image/ab67616d0000485133ffa5c45ccea4103c917964', 
            'https://i.scdn.co/image/ab67616d0000485133ffa5c45ccea4103c917964', 
            'https://i.scdn.co/image/ab67616d0000485147a8e98572d3bd007fbd59e1', 
            'https://i.scdn.co/image/ab67616d000048518f839aea0e4d5e0868c789ca', 
            'https://i.scdn.co/image/ab67616d00004851fb1cb900d28642e668d77b12', 
            'https://i.scdn.co/image/ab67616d00004851fb1cb900d28642e668d77b12', 
            'https://i.scdn.co/image/ab67616d00004851bc1eea2d47100a4498661df7', 
            'https://i.scdn.co/image/ab67616d0000485119ed71aa39d8e1d791aa9af6', 
            'https://i.scdn.co/image/ab67616d0000485119ed71aa39d8e1d791aa9af6', 
            'https://i.scdn.co/image/ab67616d0000485119ed71aa39d8e1d791aa9af6', 
            'https://i.scdn.co/image/ab67616d0000485119ed71aa39d8e1d791aa9af6', 
            'https://i.scdn.co/image/ab67616d000048514d0403d3460d13d032b49bd6', 
            'https://i.scdn.co/image/ab67616d00004851d5edf0a2f87a3a6ce19c48e7', 
            'https://i.scdn.co/image/ab67616d00004851f2248cf6dad1d6c062587249', 
            'https://i.scdn.co/image/ab67616d000048511c8c6a4829b34f46e037a1c9', 
            'https://i.scdn.co/image/ab67616d000048512f115b79fcc3e561c4ee4993', 
            'https://i.scdn.co/image/ab67616d000048510596663ddf38968474ce107f', 
            'https://i.scdn.co/image/ab67616d00004851f78c98bbf2b3c9e2a764203e', 
            'https://i.scdn.co/image/ab67616d00004851294d81f46043789b451381e1', 
            'https://i.scdn.co/image/ab67616d000048515282d57c8563f28262bf0905', 
            'https://i.scdn.co/image/ab67616d000048515282d57c8563f28262bf0905', 
            'https://i.scdn.co/image/ab67616d00004851f12c7a6a377a99c42a37db65', 
            'https://i.scdn.co/image/ab67616d0000485148a98a5a97b2cc7963016888', 
            'https://i.scdn.co/image/ab67616d00004851dbf5be8bd5224e9ed7eebcae', 
            'https://i.scdn.co/image/ab67616d0000485186ab7fc85640321a5f0d56e1', 
            'https://i.scdn.co/image/ab67616d000048510e6cedee56e37a9a65f2164d', 
            'https://i.scdn.co/image/ab67616d000048511ad53ace0e49a637c2fc9780', 
            'https://i.scdn.co/image/ab67616d00004851cb9aa2d1c58cfa3890ab80eb', 
            'https://i.scdn.co/image/ab67616d000048514ecbd4ca8b02e19e48073662', 
            'https://i.scdn.co/image/ab67616d000048518a05cc3f101aa4d291d79826', 
            'https://i.scdn.co/image/ab67616d00004851e0114a86a2a0a7d8762951d9', 
            'https://i.scdn.co/image/ab67616d0000485182d5736a2c3e481b59c4fdc0', 
            'https://i.scdn.co/image/ab67616d0000485143712c2c240defc2daf4886f', 
            'https://i.scdn.co/image/ab67616d00004851a82b6363eb1895f2e9aae530', 
            'https://i.scdn.co/image/ab67616d00004851a82b6363eb1895f2e9aae530', 
            'https://i.scdn.co/image/ab67616d00004851a82b6363eb1895f2e9aae530', 
            'https://i.scdn.co/image/ab67616d00004851a82b6363eb1895f2e9aae530', 
            'https://i.scdn.co/image/ab67616d00004851509ca652481f77e11cd6c2de', 
            'https://i.scdn.co/image/ab67616d000048513b2faf93671fa56abd641659', 
            'https://i.scdn.co/image/ab67616d00004851ccd63af052f7e438c05f6c94', 
            'https://i.scdn.co/image/ab67616d0000485125d10f813fd1114b2bb9e39a', 
            'https://i.scdn.co/image/ab67616d0000485125d10f813fd1114b2bb9e39a', 
            'https://i.scdn.co/image/ab67616d0000485140080ed5a2ec3c92bf445247', 
            'https://i.scdn.co/image/ab67616d000048515f52cd2f13aec5e6ceb00002', 
            'https://i.scdn.co/image/ab67616d000048516f04e53cb5309f8e88286842', 
            'https://i.scdn.co/image/ab67616d00004851834f16100678d3e800fb5fb9', 
            'https://i.scdn.co/image/ab67616d0000485140418183fb62e14b91ae5730', 
            'https://i.scdn.co/image/ab67616d000048512ece7efd9c5688c4ddcd97d5', 
            'https://i.scdn.co/image/ab67616d000048512ece7efd9c5688c4ddcd97d5', 
            'https://i.scdn.co/image/ab67616d000048514df49f57f9ee8f743e228599', 
            'https://i.scdn.co/image/ab67616d00004851ff93de8031bd1819279d9316', 
            'https://i.scdn.co/image/ab67616d00004851feb446e50d1914af5b41ce81', 
            'https://i.scdn.co/image/ab67616d00004851feb446e50d1914af5b41ce81', 
            'https://i.scdn.co/image/ab67616d00004851af68a73e89824d0101781c0b', 
            'https://i.scdn.co/image/ab67616d00004851af68a73e89824d0101781c0b', 
            'https://i.scdn.co/image/ab67616d00004851af68a73e89824d0101781c0b', 
            'https://i.scdn.co/image/ab67616d000048518fa60e4a773decf4e0567cda', 
            'https://i.scdn.co/image/ab67616d000048511d99e1b7bafff3c90aafe17c', 
            'https://i.scdn.co/image/ab67616d000048518792c3e96f8ab97a767c5d0c', 
            'https://i.scdn.co/image/ab67616d000048512e8ed79e177ff6011076f5f0', 
            'https://i.scdn.co/image/ab67616d000048512e8ed79e177ff6011076f5f0', 
            'https://i.scdn.co/image/ab67616d000048512e8ed79e177ff6011076f5f0', 
            'https://i.scdn.co/image/ab67616d0000485195998c6ca2c759356eee3c3b', 
            'https://i.scdn.co/image/ab67616d0000485195998c6ca2c759356eee3c3b', 
            'https://i.scdn.co/image/ab67616d00004851cc78e66bcba98866d5ebcdf9', 
            'https://i.scdn.co/image/ab67616d0000485171fb9e2661fe02a282361cc1', 
            'https://i.scdn.co/image/ab67616d0000485198392b90e6272a7c529eba12', 
            'https://i.scdn.co/image/ab67616d000048516c619c39c853f8b1d67b7859', 
            'https://i.scdn.co/image/ab67616d000048512a038d3bf875d23e4aeaa84e', 
            'https://i.scdn.co/image/ab67616d0000485104d0a7a054f29d8b6773c51b', 
            'https://i.scdn.co/image/ab67616d000048510d4dd6b15ff403f43929b9a3', 
            'https://i.scdn.co/image/ab67616d00004851365f8cca4d2e801b28757930', 
            'https://i.scdn.co/image/ab67616d00004851ec3d15eab5bd77027abc4b23', 
            'https://i.scdn.co/image/ab67616d00004851a9f6c04ba168640b48aa5795', 
            'https://i.scdn.co/image/ab67616d000048514af804fe6fadee8ebe22890e', 
            'https://i.scdn.co/image/ab67616d00004851a8264f29f255ef19a8a746f3', 
            'https://i.scdn.co/image/ab67616d00004851a294b90d09466e9c74d76f8a', 
            'https://i.scdn.co/image/ab67616d000048511bab301202e00444b4011b2d', 
            'https://i.scdn.co/image/ab67616d00004851e8f427e22592b343cd3108a6', 
            'https://i.scdn.co/image/ab67616d00004851e8f427e22592b343cd3108a6', 
            'https://i.scdn.co/image/ab67616d00004851e8f427e22592b343cd3108a6', 
            'https://i.scdn.co/image/ab67616d0000485101bfd9cea452f6c27eaea4cb', 
            'https://i.scdn.co/image/ab67616d00004851f96cefb0197694ad440c3314', 
            'https://i.scdn.co/image/ab67616d000048514ca68d59a4a29c856a4a39c2', 
            'https://i.scdn.co/image/ab67616d000048517a9bf5f82e32d33d4503fe7b', 
            'https://i.scdn.co/image/ab67616d00004851d65c698f7b03031930a2a570', 
            'https://i.scdn.co/image/ab67616d00004851bf7c317a63c4f128b8823406']
    test_range_blur = [2, 5]
    test_range_size = [32]
    test_range_quantization = [16, 20]
    for blur in test_range_blur:
        for size in test_range_size:
            for quantization in test_range_quantization:
                ccv_dict = []
                for url in urls:
                    ccv_dict.append((url, ccv(url, 
                                              size=size, 
                                              blur=blur, 
                                              quantized_level=quantization)))
                loop = loop_sort(ccv_dict, ccv_distance)
                loop = resort_loop(loop, ccv_distance, len(loop))
                mosaic = make_mosaic(loop)
                mosaic.save(f"tests/1_blur{blur}_size{size}_quantization{quantization}.png")
                